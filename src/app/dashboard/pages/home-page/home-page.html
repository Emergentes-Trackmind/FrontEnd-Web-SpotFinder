<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <h1 class="page-title">Dashboard</h1>
    <div class="header-actions">
      <button mat-icon-button (click)="onRefreshData()" matTooltip="Actualizar datos">
        <mat-icon>refresh</mat-icon>
      </button>
      <button mat-icon-button (click)="onSearch()" matTooltip="Buscar">
        <mat-icon>search</mat-icon>
      </button>
      <button mat-icon-button (click)="onNotifications()" matTooltip="Notificaciones" matBadge="3" matBadgeColor="warn">
        <mat-icon>notifications</mat-icon>
      </button>
      <button mat-icon-button (click)="onProfile()" matTooltip="Perfil">
        <mat-icon>account_circle</mat-icon>
      </button>
    </div>
  </div>

  <!-- Loading Progress Bar -->
  <mat-progress-bar mode="indeterminate" *ngIf="loading | async" class="loading-bar"></mat-progress-bar>

  <!-- KPI Cards Row usando componentes profesionales -->
  <div class="kpi-section">
    <div class="kpi-grid">
      <app-kpi-card
        *ngFor="let kpi of kpiCards()"
        [kpi]="{
          title: kpi.title,
          value: kpi.value,
          delta: kpi.deltaType === 'positive' ? 12 : kpi.deltaType === 'negative' ? -5 : 0,
          deltaText: kpi.delta,
          icon: kpi.icon,
          color: kpi.color
        }">
      </app-kpi-card>
    </div>
  </div>

  <!-- Charts Row usando componentes con Chart.js -->
  <div class="charts-section">
    <div class="charts-grid">
      <!-- Revenue Chart Component -->
      <app-revenue-chart
        [data]="revenueByMonth()"
        [loading]="(loading | async) || false">
      </app-revenue-chart>

      <!-- Occupancy Chart Component -->
      <app-occupancy-chart
        [data]="occupancyByHour()"
        [loading]="(loading | async) || false">
      </app-occupancy-chart>
    </div>
  </div>

  <!-- Lists Row usando componentes profesionales -->
  <div class="lists-section">
    <div class="lists-grid">
      <!-- Recent Activity Component -->
      <app-recent-activity
        [activities]="recentActivity()"
        [loading]="(loading | async) || false">
      </app-recent-activity>

      <!-- Top Parkings Component -->
      <app-top-parkings
        [parkings]="topParkings()"
        [loading]="(loading | async) || false">
      </app-top-parkings>
    </div>
  </div>
</div>
